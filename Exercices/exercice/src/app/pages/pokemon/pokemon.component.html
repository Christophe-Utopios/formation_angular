<form
  [formGroup]="pokeForm"
  (ngSubmit)="onSubmit()"
  class="space-y-6 bg-slate-50 p-8 rounded-lg shadow-md max-w-lg mx-auto"
>
  <!-- Nom -->
  <p>
    <label for="name" class="block text-sm font-medium text-slate-700">Nom</label>
    <input
      id="name"
      formControlName="name"
      class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
      placeholder="Nom du Pokémon"
    />
  </p>

  <!-- Description -->
  <p>
    <label for="desc" class="block text-sm font-medium text-slate-700">Description</label>
    <textarea
      id="desc"
      formControlName="description"
      class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
      placeholder="Description du Pokémon"
    ></textarea>
  </p>

  <!-- Zone d'apparition -->
  <fieldset formGroupName="zone" class="border border-slate-300 p-4 rounded-lg">
    <legend class="text-lg font-semibold text-slate-700">Zone d'apparition</legend>

    <!-- Nom de la zone -->
    <p>
      <label for="z_name" class="block text-sm font-medium text-slate-700">Nom de la zone</label>
      <input
        id="z_name"
        formControlName="name"
        class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
        placeholder="Nom de la zone"
      />
    </p>

    <!-- Description de la zone -->
    <p>
      <label for="z_desc" class="block text-sm font-medium text-slate-700"
        >Description de la zone</label
      >
      <input
        id="z_desc"
        formControlName="description"
        class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
        placeholder="Description de la zone"
      />
    </p>
  </fieldset>

  <!-- Type -->
  <p>
    <label for="type" class="block text-sm font-medium text-slate-700">Type</label>
    <select
      id="type"
      multiple
      formControlName="types"
      class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
    >
      @for (type of types; track type) {
      <option [value]="type">{{ type }}</option>
      }
    </select>
  </p>

  <!-- Attaques -->
  <fieldset formArrayName="attacks" class="border border-slate-300 p-4 rounded-lg space-y-4">
    <legend class="text-lg font-semibold text-slate-700">Attaques</legend>

    @for (group of attacks.controls; track group) {
    <fieldset [formGroupName]="$index" class="border border-slate-200 p-4 rounded-lg">
      <legend class="text-sm font-semibold text-slate-600">Attaque {{ $index + 1 }}</legend>

      <!-- Nom de l'attaque -->
      <p>
        <label [for]="$index + 'name'" class="block text-sm font-medium text-slate-700">Nom</label>
        <input
          [id]="$index + 'name'"
          formControlName="name"
          class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
          placeholder="Nom de l'attaque"
        />
      </p>

      <!-- Puissance de l'attaque -->
      <p>
        <label [for]="$index + 'power'" class="block text-sm font-medium text-slate-700"
          >Puissance</label
        >
        <input
          type="number"
          [id]="$index + 'power'"
          formControlName="power"
          class="mt-1 block w-full px-4 py-2 border border-slate-300 rounded-md text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-slate-500"
          placeholder="Puissance"
        />
      </p>
    </fieldset>
    }

    <!-- Ajouter une attaque -->
    <button
      type="button"
      (click)="addAttack()"
      class="mt-4 bg-slate-600 hover:bg-slate-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300"
    >
      Ajouter une attaque
    </button>
  </fieldset>

  <!-- Bouton de soumission -->
  <p>
    <button
      type="submit"
      class="w-full py-3 px-6 bg-slate-700 text-white rounded-lg font-semibold hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-500 transition-all duration-300"
    >
      Sauvegarder le Pokémon
    </button>
  </p>
</form>

<section>
  <h2>Mes pokemons</h2>
  <div>
    @for (poke of pokemons; track poke; let i = $index) {
    <app-pokemon-card [pokemon]="poke" />
    } @empty {
    <p>la liste est vide</p>
    }
  </div>
</section>
